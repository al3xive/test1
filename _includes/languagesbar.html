<div id="languageMenuBar"></div>

<div class="q6-api-languages-container">
    <div></div>
    <div class="q6-api-languages-menu">
        {% for language in site.data.languages %}     
             
            {% if language.id == site.data.defaults.language %}
                <div class="q6-api-languages__button q6-api-languages__button--active" data-language="{{ language.id }}">{{ language.title }}</div>
            {% else %}
                <div class="q6-api-languages__button" data-language="{{ language.id }}">{{ language.title }}</div>
            {% endif %}

        {% endfor %}               
    </div>

    <script>
        $(function () {

            // set active example based on defaul language
            var defaultLanguage = $('.q6-api-languages__button--active').attr("data-language");
            $(`.q6-api-example__language[data-example='${defaultLanguage}']`).addClass('q6-api-example__language--active');
            //

            var tabLinks = document.querySelectorAll('.q6-api-languages__button');

            tabLinks.forEach(link => link.addEventListener('click', switchTab));

            function switchTab(e){

                $('.q6-api-languages__button--active').removeClass("q6-api-languages__button--active");
                $('.q6-api-example__language--active').removeClass("q6-api-example__language--active");

                // find what tab link was clicked and show tab content
                var clickedLink = e.currentTarget;
                $(clickedLink).addClass('q6-api-languages__button--active');

                var selectedLanguage = clickedLink.getAttribute("data-language");

                $(`.q6-api-example__language[data-example='${selectedLanguage}']`).addClass('q6-api-example__language--active');

            }        
        });                                             
    </script>

</div>